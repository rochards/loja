-- MySQL Script generated by MySQL Workbench
-- Ter 25 Dez 2018 21:38:59 -02
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema loja
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `loja` ;

-- -----------------------------------------------------
-- Schema loja
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `loja` DEFAULT CHARACTER SET utf8 ;
USE `loja` ;

-- -----------------------------------------------------
-- Table `loja`.`CT_PRODUTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `loja`.`CT_PRODUTO` ;

CREATE TABLE IF NOT EXISTS `loja`.`CT_PRODUTO` (
  `CTCDPRODUTO` INT NOT NULL AUTO_INCREMENT,
  `CTNMPRODUTO` VARCHAR(45) NOT NULL,
  `CTDEPRODUTO` VARCHAR(500) NULL,
  `CTNUPRECO` DECIMAL(17,2) UNSIGNED NOT NULL DEFAULT 0,
  `CTQTPRODUTO` INT UNSIGNED NOT NULL DEFAULT 0,
  PRIMARY KEY (`CTCDPRODUTO`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `loja`.`CT_CLIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `loja`.`CT_CLIENTE` ;

CREATE TABLE IF NOT EXISTS `loja`.`CT_CLIENTE` (
  `CTCDCLIENTE` INT NOT NULL AUTO_INCREMENT,
  `CTNMCLIENTE` VARCHAR(100) NOT NULL,
  `CTNUCPF` VARCHAR(11) NOT NULL,
  `CTNUTELEFONE` VARCHAR(14) NULL,
  `CTNMEMAIL` VARCHAR(45) NULL,
  PRIMARY KEY (`CTCDCLIENTE`),
  UNIQUE INDEX `CTNUCPF_UNIQUE` (`CTNUCPF` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `loja`.`CT_FUNCIONARIO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `loja`.`CT_FUNCIONARIO` ;

CREATE TABLE IF NOT EXISTS `loja`.`CT_FUNCIONARIO` (
  `CTCDFUNCIONARIO` INT NOT NULL AUTO_INCREMENT,
  `CTNUCPF` VARCHAR(11) NOT NULL,
  `CTNMFUNCIONARIO` VARCHAR(45) NOT NULL,
  `CTNUTELEFONE` VARCHAR(14) NOT NULL,
  `CTNMEMAIL` VARCHAR(45) NOT NULL,
  `CTNMCARGO` VARCHAR(8) NOT NULL,
  PRIMARY KEY (`CTCDFUNCIONARIO`),
  UNIQUE INDEX `CTNUCPF_UNIQUE` (`CTNUCPF` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `loja`.`CT_USUARIO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `loja`.`CT_USUARIO` ;

CREATE TABLE IF NOT EXISTS `loja`.`CT_USUARIO` (
  `CTNUCPF` VARCHAR(11) NOT NULL,
  `CTNMUSUARIO` VARCHAR(10) NOT NULL,
  `CTNMDSENHA` CHAR(60) NOT NULL,
  `CTCDGERENTE` TINYINT(1) NOT NULL DEFAULT 1,
  UNIQUE INDEX `CTCDLOGIN_UNIQUE` (`CTNMUSUARIO` ASC),
  PRIMARY KEY (`CTNUCPF`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `loja`.`CT_VENDA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `loja`.`CT_VENDA` ;

CREATE TABLE IF NOT EXISTS `loja`.`CT_VENDA` (
  `CTCDVENDA` INT NOT NULL AUTO_INCREMENT,
  `CTNUVALORPRODUTO` DECIMAL(17,2) NOT NULL DEFAULT 0,
  `CTNUVALORVENDA` DECIMAL(17,2) NOT NULL DEFAULT 0,
  `CTQTPRODUTO` INT UNSIGNED NOT NULL DEFAULT 1,
  `CTNUDESCONTO` DECIMAL(17,2) NOT NULL DEFAULT 0,
  `CTNMFORMAPAGAMENTO` VARCHAR(8) NOT NULL,
  `CTDTVENDA` TIMESTAMP(0) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `CTCDPRODUTO` INT NOT NULL,
  `CTCDCLIENTE` INT NOT NULL,
  `CTCDFUNCIONARIO` INT NOT NULL,
  PRIMARY KEY (`CTCDVENDA`),
  INDEX `FK_VENDA_PRODUTO` (`CTCDPRODUTO` ASC),
  INDEX `FK_VENDA_CLIENTE` (`CTCDCLIENTE` ASC),
  INDEX `FK_VENDA_FUNCIONARIO` (`CTCDFUNCIONARIO` ASC),
  CONSTRAINT `FK_PRODUTOS`
    FOREIGN KEY (`CTCDPRODUTO`)
    REFERENCES `loja`.`CT_PRODUTO` (`CTCDPRODUTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_CLIENTES`
    FOREIGN KEY (`CTCDCLIENTE`)
    REFERENCES `loja`.`CT_CLIENTE` (`CTCDCLIENTE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_FUNCIONARIOS`
    FOREIGN KEY (`CTCDFUNCIONARIO`)
    REFERENCES `loja`.`CT_FUNCIONARIO` (`CTCDFUNCIONARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `loja`.`CT_RELATORIOS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `loja`.`CT_RELATORIOS` ;

CREATE TABLE IF NOT EXISTS `loja`.`CT_RELATORIOS` (
  `CTCDRELATORIO` INT NOT NULL,
  `CTDTVENDA` TIMESTAMP(0) NOT NULL,
  `CTNMFORMAPAGAMENTO` VARCHAR(8) NOT NULL,
  PRIMARY KEY (`CTCDRELATORIO`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
